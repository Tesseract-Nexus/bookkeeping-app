{{- if not (lookup "v1" "Secret" .Release.Namespace "bookkeeping-secrets") }}
apiVersion: v1
kind: Secret
metadata:
  name: bookkeeping-secrets
  labels:
    app.kubernetes.io/name: {{ .Release.Name }}
    app.kubernetes.io/instance: {{ .Release.Name }}
  annotations:
    helm.sh/resource-policy: keep
type: Opaque
stringData:
  # Database
  DATABASE_HOST: "postgres.database.svc.cluster.local"
  DATABASE_PORT: "5432"
  DATABASE_USER: "bookkeeping"
  DATABASE_PASSWORD: "changeme"
  DATABASE_NAME: "bookkeeping"
  DATABASE_SSL_MODE: "disable"
  # Redis
  REDIS_HOST: "redis.cache.svc.cluster.local"
  REDIS_PORT: "6379"
  REDIS_PASSWORD: ""
  # JWT
  JWT_SECRET: "your-super-secret-jwt-key-change-in-production"
  JWT_ISSUER: "bookkeeping-app"
{{- end }}
