# Global settings
global:
  image:
    tag: "main"
  env: dev

# Istio VirtualService configuration
virtualService:
  enabled: true
  hosts:
    - "dev-bookkeeping.tesserix.app"
  gateway: istio-system/main-gateway

# Auth Service
auth-service:
  enabled: true
  serviceName: auth-service
  replicaCount: 1
  image:
    repository: ghcr.io/tesseract-nexus/bookkeeping-app
    tag: "main"
  env:
    - name: SERVICE_NAME
      value: "auth-service"
    - name: PORT
      value: "8080"
  envFrom:
    - secretRef:
        name: bookkeeping-secrets
    - configMapRef:
        name: bookkeeping-config

# Bookkeeping Service
bookkeeping-service:
  enabled: true
  serviceName: bookkeeping-service
  replicaCount: 1
  image:
    repository: ghcr.io/tesseract-nexus/bookkeeping-app
    tag: "main"
  env:
    - name: SERVICE_NAME
      value: "bookkeeping-service"
    - name: PORT
      value: "8080"
  envFrom:
    - secretRef:
        name: bookkeeping-secrets
    - configMapRef:
        name: bookkeeping-config

# Customer Service
customer-service:
  enabled: true
  serviceName: customer-service
  replicaCount: 1
  image:
    repository: ghcr.io/tesseract-nexus/bookkeeping-app
    tag: "main"
  env:
    - name: SERVICE_NAME
      value: "customer-service"
    - name: PORT
      value: "8080"
  envFrom:
    - secretRef:
        name: bookkeeping-secrets
    - configMapRef:
        name: bookkeeping-config

# Invoice Service
invoice-service:
  enabled: true
  serviceName: invoice-service
  replicaCount: 1
  image:
    repository: ghcr.io/tesseract-nexus/bookkeeping-app
    tag: "main"
  env:
    - name: SERVICE_NAME
      value: "invoice-service"
    - name: PORT
      value: "8080"
  envFrom:
    - secretRef:
        name: bookkeeping-secrets
    - configMapRef:
        name: bookkeeping-config

# Report Service
report-service:
  enabled: true
  serviceName: report-service
  replicaCount: 1
  image:
    repository: ghcr.io/tesseract-nexus/bookkeeping-app
    tag: "main"
  env:
    - name: SERVICE_NAME
      value: "report-service"
    - name: PORT
      value: "8080"
  envFrom:
    - secretRef:
        name: bookkeeping-secrets
    - configMapRef:
        name: bookkeeping-config

# Tax Service
tax-service:
  enabled: true
  serviceName: tax-service
  replicaCount: 1
  image:
    repository: ghcr.io/tesseract-nexus/bookkeeping-app
    tag: "main"
  env:
    - name: SERVICE_NAME
      value: "tax-service"
    - name: PORT
      value: "8080"
  envFrom:
    - secretRef:
        name: bookkeeping-secrets
    - configMapRef:
        name: bookkeeping-config

# Tenant Service
tenant-service:
  enabled: true
  serviceName: tenant-service
  replicaCount: 1
  image:
    repository: ghcr.io/tesseract-nexus/bookkeeping-app
    tag: "main"
  env:
    - name: SERVICE_NAME
      value: "tenant-service"
    - name: PORT
      value: "8080"
  envFrom:
    - secretRef:
        name: bookkeeping-secrets
    - configMapRef:
        name: bookkeeping-config

# Web App
web-app:
  enabled: true
  replicaCount: 1
  image:
    repository: ghcr.io/tesseract-nexus/bookkeeping-app/web
    tag: "main"
  env:
    - name: NODE_ENV
      value: "production"
    - name: AUTH_SERVICE_URL
      value: "http://bookkeeping-auth-service:8080"
    - name: BOOKKEEPING_SERVICE_URL
      value: "http://bookkeeping-bookkeeping-service:8080"
    - name: CUSTOMER_SERVICE_URL
      value: "http://bookkeeping-customer-service:8080"
    - name: INVOICE_SERVICE_URL
      value: "http://bookkeeping-invoice-service:8080"
    - name: REPORT_SERVICE_URL
      value: "http://bookkeeping-report-service:8080"
    - name: TAX_SERVICE_URL
      value: "http://bookkeeping-tax-service:8080"
    - name: TENANT_SERVICE_URL
      value: "http://bookkeeping-tenant-service:8080"
  envFrom:
    - secretRef:
        name: bookkeeping-secrets
